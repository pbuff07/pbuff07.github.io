---
title: "HTTP状态码301和302的区别"
date: 2025-02-08T14:00:00+08:00
categories: ["Web安全"]
tags: ["http", "状态码", "重定向"]
toc: false
numberedSubtitles: false
---

之前在配置nginx重定向的时候总是搞不清楚301和302的区别，今天整理一下。

**301 Moved Permanently**

永久重定向。这个比较简单，就是说资源永久移动到新位置了，搜索引擎会更新索引，把旧地址换成新地址。

比如网站换域名了，从 `old.com` 换到 `new.com`，就该用301：

```nginx
server {
    listen 80;
    server_name old.com;
    return 301 https://new.com$request_uri;
}
```

**302 Found**

临时重定向。资源临时搬到别的位置，之后还会回来，搜索引擎不会更新索引。

最常见的就是登录跳转，用户访问 `/admin`，发现没登录，302跳转到 `/login`，登录完又跳回来。

```nginx
location /admin {
    if ($logged_in != "1") {
        return 302 /login;
    }
}
```

**实际应用中的区别**

有一次我配置CDN回源，用302结果CDN节点一直不缓存，每次都回源拉数据。改成301就好了，因为CDN认为这只是临时跳转，源随时会变。

还有个坑，有些浏览器会对302的POST请求转成GET，这个要注意。

**总结**

- 301：永久搬家，SEO权重会转移
- 302：临时搬家，SEO权重不动
- 选错了会影响缓存和SEO，搞不清楚就用301
